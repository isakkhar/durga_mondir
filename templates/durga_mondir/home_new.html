{% extends 'durga_mondir/base.html' %}
{% load static %}

{% block extra_css %}
<style>
    /* Home page specific background */
    body.home-page {
        background-image: url('{% static "images/bg.jpg" %}');
        background-repeat: repeat;
        background-size: 200px 200px;
        background-attachment: fixed;
        overflow-x: hidden;
    }
    
    /* Hero Section with Durga Images */
    .hero-section {
        background: linear-gradient(135deg, rgba(4, 69, 112, 0.8), rgba(4, 69, 112, 0.9)), 
                    url('{% static "images/Hindu_Banner_PNG_Image_004.png" %}');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        min-height: 100vh;
        position: relative;
        display: flex;
        align-items: center;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }
    
    .hero-title {
        font-size: 4rem;
        font-weight: 800;
        color: white;
        text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        margin-bottom: 2rem;
        animation: fadeInUp 1s ease-out;
    }
    
    .hero-subtitle {
        font-size: 1.5rem;
        color: rgba(255,255,255,0.9);
        margin-bottom: 3rem;
        animation: fadeInUp 1s ease-out 0.2s both;
    }
    
    /* Countdown Section */
    .countdown-section {
        background: linear-gradient(135deg, rgba(255, 107, 107, 0.9), rgba(238, 90, 36, 0.9)),
                    url('{% static "images/durga_puja_1.png" %}');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        padding: 5rem 0;
        color: white;
        position: relative;
    }
    
    .countdown-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        z-index: 1;
    }
    
    .countdown-content {
        position: relative;
        z-index: 2;
        text-align: center;
    }
    
    .countdown-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 2rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .countdown-timer {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 3rem 2rem;
        margin: 2rem auto;
        max-width: 600px;
        border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .countdown-number {
        font-size: 4rem;
        font-weight: 800;
        background: linear-gradient(45deg, #fff, #f39c12);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        display: block;
        text-shadow: none;
        animation: pulse 2s infinite;
    }
    
    .countdown-text {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }
    
    /* Gallery Showcase */
    .gallery-showcase {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        padding: 5rem 0;
    }
    
    .gallery-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        margin-bottom: 2rem;
    }
    
    .gallery-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    }
    
    .gallery-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    
    .gallery-card:hover img {
        transform: scale(1.1);
    }
    
    /* Features Section */
    .features-section {
        background: linear-gradient(135deg, rgba(4, 69, 112, 0.05), rgba(4, 69, 112, 0.1));
        padding: 5rem 0;
    }
    
    .feature-card {
        background: white;
        padding: 3rem 2rem;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        margin-bottom: 2rem;
        border-top: 5px solid #044570;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .feature-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #044570, #0056b3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        color: white;
        font-size: 2rem;
    }
    
    /* About Section with Durga Images */
    .about-section {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95)),
                    url('{% static "images/durga_puja_2.png" %}');
        background-size: cover;
        background-position: center;
        padding: 5rem 0;
    }
    
    .about-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 3rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    /* Statistics Section */
    .stats-section {
        background: linear-gradient(135deg, #044570, #0056b3);
        color: white;
        padding: 4rem 0;
    }
    
    .stat-item {
        text-align: center;
        padding: 2rem 1rem;
    }
    
    .stat-number {
        font-size: 3rem;
        font-weight: 800;
        display: block;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, #fff, #f39c12);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .stat-label {
        font-size: 1.2rem;
        font-weight: 600;
    }
    
    /* Animations */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
    }
    
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
    }
    
    .animate-on-scroll.animated {
        opacity: 1;
        transform: translateY(0);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }
        
        .countdown-title {
            font-size: 2rem;
        }
        
        .countdown-number {
            font-size: 2.5rem;
        }
        
        .countdown-timer {
            padding: 2rem 1rem;
        }
    }
    
    /* Section Titles */
    .section-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #044570;
        text-align: center;
        margin-bottom: 3rem;
        position: relative;
    }
    
    .section-title::after {
        content: '';
        width: 80px;
        height: 4px;
        background: linear-gradient(135deg, #044570, #0056b3);
        display: block;
        margin: 1rem auto;
        border-radius: 2px;
    }
</style>
{% endblock %}

{% block body_class %}home-page{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="hero-content">
                    <h1 class="hero-title">
                        {% if site_settings %}{{ site_settings.site_title }}{% else %}দুর্গা মন্দির{% endif %}
                    </h1>
                    <p class="hero-subtitle">
                        {% if site_settings and site_settings.site_tagline %}
                            {{ site_settings.site_tagline }}
                        {% else %}
                            মা দুর্গার কৃপায় আধ্যাত্মিক শান্তি ও উন্নতির পথে
                        {% endif %}
                    </p>
                    <div class="hero-buttons">
                        <a href="{% url 'durga:events' %}" class="btn btn-light btn-lg me-3">
                            <i class="fas fa-calendar-alt me-2"></i>অনুষ্ঠান
                        </a>
                        <a href="{% url 'durga:contact' %}" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-envelope me-2"></i>যোগাযোগ
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <img src="{% static 'images/1_Om.svg.webp' %}" alt="Om Symbol" class="img-fluid" style="max-width: 300px; filter: drop-shadow(0 0 20px rgba(255,255,255,0.5));">
            </div>
        </div>
    </div>
</section>

<!-- Countdown Section -->
{% if countdown and countdown.is_countdown_active %}
<section class="countdown-section">
    <div class="container">
        <div class="countdown-content">
            <h2 class="countdown-title">{{ countdown.title }}</h2>
            <div class="countdown-timer">
                <p class="countdown-text">{{ countdown.message_before }}</p>
                <span class="countdown-number" id="countdown-days">{{ countdown.days_remaining }}</span>
                <p class="countdown-text">{{ countdown.message_after }}</p>
            </div>
            <p class="lead">{{ countdown.target_date|date:"d F Y" }} তারিখে</p>
        </div>
    </div>
</section>
{% endif %}

<!-- Statistics Section -->
<section class="stats-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="50">0</span>
                    <div class="stat-label">বছরের ঐতিহ্য</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="1000">0</span>
                    <div class="stat-label">ভক্ত পরিবার</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="365">0</span>
                    <div class="stat-label">দিন সেবা</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="24">0</span>
                    <div class="stat-label">ঘন্টা প্রার্থনা</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <h2 class="section-title animate-on-scroll">আমাদের সেবাসমূহ</h2>
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="fas fa-pray"></i>
                    </div>
                    <h4>নিয়মিত পূজা-অর্চনা</h4>
                    <p>প্রতিদিন সকাল ও সন্ধ্যায় মা দুর্গার নিয়মিত আরতি ও পূজা অনুষ্ঠান।</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h4>ধর্মীয় অনুষ্ঠান</h4>
                    <p>বিভিন্ন ধর্মীয় উৎসব ও অনুষ্ঠানের আয়োজন এবং সামাজিক সেবামূলক কার্যক্রম।</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card animate-on-scroll">
                    <div class="feature-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <h4>সমাজসেবা</h4>
                    <p>গরীব ও অসহায়দের সাহায্য, শিক্ষা সহায়তা এবং বিভিন্ন দাতব্য কার্যক্রম।</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Showcase -->
{% if featured_albums %}
<section class="gallery-showcase">
    <div class="container">
        <h2 class="section-title animate-on-scroll">গ্যালারি</h2>
        <div class="row">
            {% for album in featured_albums %}
            <div class="col-lg-3 col-md-6">
                <div class="gallery-card animate-on-scroll">
                    {% if album.cover_image %}
                        <img src="{{ album.cover_image.url }}" alt="{{ album.title }}">
                    {% else %}
                        <div class="d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
                            <i class="fas fa-images fa-3x text-muted"></i>
                        </div>
                    {% endif %}
                    <div class="p-3">
                        <h5>{{ album.title }}</h5>
                        <p class="text-muted mb-0">{{ album.get_photos_count }} টি ছবি</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'durga:gallery' %}" class="btn btn-primary btn-lg">
                <i class="fas fa-images me-2"></i>সম্পূর্ণ গ্যালারি দেখুন
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- About Section -->
<section class="about-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="about-card animate-on-scroll">
                    <h2 class="section-title text-start">আমাদের সম্পর্কে</h2>
                    <p class="lead">
                        যিনি জ্ঞানাঞ্জনশলাকায় অজ্ঞান-তিমিরাচ্ছন্ন অন্ধজনের চক্ষুরুন্মীলিত করিয়া দেন, সেই শ্রীগুরুর শ্রীপাদপদ্মে সাষ্টাঙ্গে প্রণিপাত করিতেছি।
                    </p>
                    <p>
                        আপনাদের সকলকে স্বাগতম। এই ধাম/আশ্রমটি হইল এমন একটি আধ্যাত্মিক কেন্দ্র যেখানে যে কোনো ধর্মবিশ্বাসী বা একেবারেই বিশ্বাস নাই এমন মানুষও প্রতিফলিত হইতে, প্রশ্ন করিতে, আলোচনা শুনিতে, প্রার্থনা করিতে, হরিনাম করিতে / শুনিতে, ধ্যান, জ্ঞান এবং নিজেকে পরের সেবায় উৎসর্গ করিতে আসেন।
                    </p>
                    <div class="mt-4">
                        <a href="{% url 'durga:committee' %}" class="btn btn-primary me-3">
                            <i class="fas fa-users me-2"></i>কমিটি
                        </a>
                        <a href="{% url 'durga:durga_sangha' %}" class="btn btn-outline-primary">
                            <i class="fas fa-hands-helping me-2"></i>দুর্গা সংঘ
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <img src="{% static 'images/durga_puja_3.png' %}" alt="Durga Puja" class="img-fluid animate-on-scroll" style="max-width: 350px; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));">
            </div>
        </div>
    </div>
</section>

<script>
// Animate on scroll
function animateOnScroll() {
    const elements = document.querySelectorAll('.animate-on-scroll');
    
    elements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;
        
        if (elementTop < windowHeight - 100) {
            element.classList.add('animated');
        }
    });
}

// Counter animation
function animateCounters() {
    const counters = document.querySelectorAll('.stat-number[data-count]');
    
    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-count'));
        let current = 0;
        const increment = target / 100;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            counter.textContent = Math.floor(current);
        }, 20);
    });
}

// Initialize animations
document.addEventListener('DOMContentLoaded', function() {
    animateOnScroll();
    
    // Trigger counter animation when stats section is visible
    const statsSection = document.querySelector('.stats-section');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounters();
                observer.unobserve(entry.target);
            }
        });
    });
    
    if (statsSection) {
        observer.observe(statsSection);
    }
});

window.addEventListener('scroll', animateOnScroll);

// Update countdown daily
{% if countdown %}
setInterval(() => {
    const countdownElement = document.getElementById('countdown-days');
    if (countdownElement) {
        fetch('{% url "durga:home" %}')
            .then(response => response.text())
            .then(data => {
                // This would need a separate API endpoint for real-time updates
                // For now, the page refresh will update the countdown
            });
    }
}, 86400000); // 24 hours
{% endif %}
</script>
{% endblock %}